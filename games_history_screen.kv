<GamesHistoryScreen>
    name: "GamesHistoryScreen"

    AnchorLayout:
        id: outer_centring_box
        anchor_x: "center"
        anchor_y: "center"
        canvas:
            Color:
                rgba: app.background_color
            Rectangle:
                pos: self.pos
                size: self.size

        BorderedBoxLayout:
            id: main_box
            orientation: "vertical"
            size_hint: .95, .98

            BorderedBoxLayout:
                orientation: "horizontal"
                size_hint: 1, .1

                AnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"
                    size_hint: .3, 1

                    Button:
                        id: back_button
                        background_normal: app.back_icon
                        background_down:'img/left_arrow_black.png'
                        border: 0, 0, 0, 0
                        on_press: root.to_points_calculation_screen()
                        size_hint: .63, .75

                Label:
                    id: header_text
                    text: "[b]История[/b]"
                    font_size: dp(25)
                    markup: True
                    halign: "center"
                    color: app.text_color

                AnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"
                    size_hint: .3, 1

                    Button:
                        id: to_players_rating_screen_button
                        background_normal: app.rating_icon
                        background_down:'img/rating_icon_black.png'
                        border: 0, 0, 0, 0
                        on_press: root.to_players_rating_screen()
                        size_hint: .7, .7

            BoxLayout:
                orientation: "horizontal"
                size_hint: 1, .1

                FloatLayout:
                    id: search_image_box
                    size_hint: .1, .8

                AnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"

                    TextInput:
                        id: search_input
                        hint_text: "Поиск по имени"
                        halign: "center"
                        multiline: False
                        size_hint: .9, .7
                        font_size: 18
                        on_text: root.show_games_history(self.text)

                AnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"
                    size_hint: .5, 1

                    Button:
                        id: sorting_options
                        text: ""
                        halign: "center"
                        multiline: False
                        size_hint: .6, .7
                        font_size: 18
                        on_text: root.show_games_history()

            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                size_hint: 1, .1
                canvas:
                    Color:
                        rgba: app.text_color
                    Rectangle:
                        pos: self.x, self.y
                        size: self.width, self.height - dp(1)

                    Color:
                        rgba: app.background_color
                    Rectangle:
                        pos: self.x + dp(1), self.y + dp(2)
                        size: self.width - dp(2), self.height - dp(0)

                GridLayout:
                    id: table_head
                    cols: 4
                    size_hint: 1, 1

                    Label:
                        text: "[b]№[/b]"
                        size_hint: .3, 1
                        font_size: dp(17)
                        markup: True
                        color: app.text_color


                    TableHeaderLabel:
                        text: "[b]Имя[/b]"
                        size_hint: .7, 1

                    TableHeaderLabel:
                        text: "[b]Очки[/b]"
                        size_hint: .35, 1

                    TableHeaderEndLabel:
                        text: "[b]Дата[/b]"
                        size_hint: .85, 1

            AnchorLayout:
                id: data_table_scroll_centring_box
                anchor_x: "center"
                anchor_y: "center"

                ScrollView:
                    id: data_table_scroll_view
                    do_scroll_x: False
                    do_scroll_y: True

                    GridLayout:
                        cols: 1
                        id: data_table_scroll_box
                        size_hint_y:None
                        height: self.minimum_height
                        separator_color: 0, 0, 1
                        spacing: dp(30)

                        canvas:
                            Color:
                                rgba: app.text_color
                            Rectangle:
                                pos: self.x + self.width - dp(1), self.y
                                size: dp(1), self.height

#                            Color:
#                                rgba: app.text_color[0], app.text_color[1], app.text_color[2], 0.1
#                            Rectangle:
#                                pos: self.x, self.y
#                                size: self.width, self.height

#                            Color:
#                                rgba: app.text_color[0], app.text_color[1], app.text_color[2], 0.1
#                            Rectangle:
#                                pos: self.x, self.y
#                                size: self.width, 210

<TableHeaderLabel@Label>
    font_size: dp(17)
    markup: True
    canvas:
        # Table columns lining
        Color:
            rgba: app.text_color[0], app.text_color[1], app.text_color[2], 0.3
        Rectangle:
            pos: self.x, self.y - dp(510)
            size: self.width, self.height + dp(480)

        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.x + dp(1), self.y - dp(510)
            size: self.width - dp(1), self.height + dp(480)

        # Table header lining
        Color:
            rgba: app.text_color
        Rectangle:
            pos: self.x, self.y
            size: self.width, self.height - dp(15)

        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.x + dp(3), self.y + dp(2)
            size: self.width - dp(3), self.height - dp(16)

        # Text color
        Color:
            rgba: app.text_color
        Rectangle:
            texture: self.texture
            pos: int(self.center_x - self.texture_size[0] / 2), int(self.center_y - self.texture_size[1] / 2)
            size: self.texture_size


<TableHeaderEndLabel@Label>
    font_size: dp(17)
    markup: True
    canvas:
        # Table columns lining
        Color:
            rgba: app.text_color[0], app.text_color[1], app.text_color[2], 0.3
        Rectangle:
            pos: self.x, self.y - dp(510)
            size: self.width, self.height + dp(480)

        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.x + dp(1), self.y - dp(510)
            size: self.width - dp(1), self.height + dp(480)

        # Table header lining
        Color:
            rgba: app.text_color
        Rectangle:
            pos: self.x, self.y
            size: self.width, self.height - dp(15)

        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.x + dp(3), self.y + dp(2)
            size: self.width - dp(4), self.height - dp(16)

        # Text color
        Color:
            rgba: app.text_color
        Rectangle:
            texture: self.texture
            pos: int(self.center_x - self.texture_size[0] / 2), int(self.center_y - self.texture_size[1] / 2)
            size: self.texture_size