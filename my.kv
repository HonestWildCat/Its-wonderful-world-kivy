<PointsCalculationScreen>
    name: "PointsCalculationScreen"

    AnchorLayout:
        id: outer_centering_box
        anchor_x: "center"
        anchor_y: "center"
        background_color: .5, .5, .1, 1

        BoxLayout:
            id: main_box
            orientation: "vertical"
            size_hint: .95, .98

            BoxLayout:
                id: header_box
                orientation: "horizontal"
                size_hint: 1, 0.10

                AnchorLayout:
                    id: spare_place_box
                    anchor_x: "center"
                    anchor_y: "center"

                Label:
                    id: header_text
                    text: "[b]∆ Подсчёт очков ∆[/b]"
                    font_size: 25
                    markup: True

                AnchorLayout:
                    id: rating_button_box
                    anchor_x: "center"
                    anchor_y: "center"

            TabbedPanel:
                id: players_tabbed_panel
                do_default_tab: False

                TabbedPanelItem:
                    id: first_player_tab
                    text: 'Игрок\n1'

                    BoxLayout:
                        id: tab_main_box
                        orientation: "vertical"

                        BoxLayout:
                            id: first_inputs_box
                            orientation: "horizontal"
                            size_hint: 1, 0.15

                            BoxLayout:
                                id: player_name_box
                                orientation: "vertical"

                                Label:
                                    id: player_name_text
                                    text: "Имя:"

                                AnchorLayout:
                                    id: player_name_centring_box
                                    anchor_x: "center"
                                    anchor_y: "center"

                                    TextInput:
                                        id: player_name_input
                                        halign: "center"
                                        multiline: False
                                        size_hint: .9, 1.1
                                        font_size: 18
                                        on_text: root.change_tab_name(self.text)

                            AnchorLayout:
                                id: clear_player_button_box
                                anchor_x: "center"
                                anchor_y: "bottom"
                                size_hint: .2, 1

                                Button:
                                    id: clear_player_button
                                    text: "x"
                                    size_hint: .7, .7
                                    font_size: 25
                                    halign: "center"
                                    valign: "top"
                                    text_size: self.size
                                    background_color: 1, .4, .4, 1
                                    on_press: root.clear_player_info()

                        BoxLayout:
                            id: second_inputs_box
                            orientation: "vertical"
                            size_hint: 1, 0.22

                            BoxLayout:
                                id: second_inputs_inner_box
                                orientation: "horizontal"

                                BoxLayout:
                                    id: normal_points_box
                                    orientation: "vertical"

                                    Label:
                                        id: normal_points_text
                                        text: "Обычные очки:"

                                    AnchorLayout:
                                        id: normal_points_centring_box
                                        anchor_x: "center"
                                        anchor_y: "center"

                                        TextInput:
                                            id: normal_points_input
                                            hint_text: "0"
                                            halign: "center"
                                            multiline: False
                                            size_hint: .9, 1
                                            font_size: 18
                                            on_text: root.calculate_result()

                                BoxLayout:
                                    id: empire_cards_box
                                    orientation: "vertical"

                                    Label:
                                        id: empire_cards_text
                                        text: "Карта империи:"

                                    AnchorLayout:
                                        id: empire_cards_centring_box
                                        anchor_x: "center"
                                        anchor_y: "center"

                                        DropDown:
                                            id: empire_cards_dropdowm

                            Label:
                                id: normal_points_result_text
                                text: "0"
                                size_hint: 1, 0.3

                        GridLayout:
                            id: category_grid_box
                            cols: 2

                        Label:
                            id: final_result_text
                            text: "Результат: 0"
                            halign: "center"
                            valign: "top"
                            size_hint: 1, 0.1
                            text_size: self.size
                            font_size: 22

                TabbedPanelItem:
                    id: second_player_tab
                    text: 'Игрок\n2'

                TabbedPanelItem:
                    id: third_player_tab
                    text: 'Игрок\n3'

                TabbedPanelItem:
                    id: fourth_player_tab
                    text: 'Игрок\n4'

                TabbedPanelItem:
                    id: fifth_player_tab
                    text: 'Игрок\n5'

            BoxLayout:
                id: menu_buttons_box
                orientation: "horizontal"
                size_hint: 1, 0.07

                Button:
                    id: save_button
                    text: "Сохранить"
                    on_press: root.save_game_data()
                    #background_color: .2, .2, .8, 1

                Button:
                    id: history_button
                    text: "История"
                    on_press: root.to_games_history_screen()
                    #background_color: .8, .65, .2, 1

                Button:
                    id: erase_button
                    text: "Стереть"
                    #background_color: .7, .4, .4, 1


<GamesHistoryScreen>
    name: "GamesHistoryScreen"

    AnchorLayout:
        id: outer_centring_box
        anchor_x: "center"
        anchor_y: "center"

        BoxLayout:
            id: main_box
            orientation: "vertical"
            size_hint: .95, .98

            BoxLayout:
                orientation: "horizontal"
                size_hint: 1, .1

                AnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"
                    size_hint: .3, 1

                    Button:
                        id: back_button
                        text: "<"
                        on_press: root.to_points_calculation_screen()
                        size_hint: .7, .8

                Label:
                    id: header_text
                    text: "[b]История[/b]"
                    font_size: 25
                    markup: True
                    halign: "center"

                AnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"
                    size_hint: .3, 1

                    Button:
                        id: to_players_rating_screen_button
                        text: ">"
                        on_press: root.to_players_rating_screen()
                        size_hint: .7, .8

            BoxLayout:
                orientation: "horizontal"
                size_hint: 1, .1

                FloatLayout:
                    id: search_image_box
                    size_hint: .1, .8

                AnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"

                    TextInput:
                        id: search_input
                        hint_text: ""
                        halign: "center"
                        multiline: False
                        size_hint: .9, .7
                        font_size: 18
                        on_text: root.show_games_history()

                AnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"
                    size_hint: .5, 1

                    TextInput:
                        id: sorting_options
                        hint_text: ""
                        halign: "center"
                        multiline: False
                        size_hint: .9, .7
                        font_size: 18
                        on_text: root.show_games_history()

            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                size_hint: 1, .1

                GridLayout:
                    id: table_head
                    cols: 4
                    size_hint: .9, 1

                    Label:
                        text: "[b]№[/b]"
                        size_hint: .4, 1
                        font_size: dp(17)
                        markup: True

                    Label:
                        text: "[b]Имя[/b]"
                        size_hint: .6, 1
                        font_size: dp(17)
                        markup: True

                    Label:
                        text: "[b]Очки[/b]"
                        size_hint: .5, 1
                        font_size: dp(17)
                        markup: True

                    Label:
                        text: "[b]Дата[/b]"
                        size_hint: 1, 1
                        font_size: dp(17)
                        markup: True
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"

                ScrollView:
                    id: data_table_scroll_view
                    do_scroll_x: False
                    do_scroll_y: True

                    GridLayout:
                        cols: 1
                        id: data_table_scroll_box
                        size_hint_y:None
                        height:self.minimum_height
                        padding: dp(5)



<PlayersRatingScreen>
    name: "PlayersRatingScreen"

    Button:
        id: back_button
        text: "Назад"
        on_press: root.to_points_calculation_screen()